{"ast":null,"code":"var _jsxFileName = \"D:\\\\full stack mern,mean,java\\\\Whiteboard Application\\\\whiteboard-frontend\\\\src\\\\pages\\\\canvas\\\\Room.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\n// import { toast } from \"react-toastify\";\nimport Canvas from \"./canvas\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst generator = rough.generator();\nconst createElement = (id, x1, y1, x2, y2, type) => {\n  switch (type) {\n    case \"line\":\n    case \"rectangle\":\n      const roughElement = type === \"line\" ? generator.line(x1, y1, x2, y2) : generator.rectangle(x1, y1, x2 - x1, y2 - y1);\n      return {\n        id,\n        x1,\n        y1,\n        x2,\n        y2,\n        type,\n        roughElement\n      };\n    case \"pencil\":\n      return {\n        id,\n        type,\n        points: [{\n          x: x1,\n          y: y1\n        }]\n      };\n    case \"text\":\n      return {\n        id,\n        type,\n        x1,\n        y1,\n        x2,\n        y2,\n        text: \"\"\n      };\n    default:\n      throw new Error(`Type not recognised: ${type}`);\n  }\n};\nconst nearPoint = (x, y, x1, y1, name) => {\n  return Math.abs(x - x1) < 5 && Math.abs(y - y1) < 5 ? name : null;\n};\nconst onLine = (x1, y1, x2, y2, x, y, maxDistance = 1) => {\n  const a = {\n    x: x1,\n    y: y1\n  };\n  const b = {\n    x: x2,\n    y: y2\n  };\n  const c = {\n    x,\n    y\n  };\n  const offset = distance(a, b) - (distance(a, c) + distance(b, c));\n  return Math.abs(offset) < maxDistance ? \"inside\" : null;\n};\nconst positionWithinElement = (x, y, element) => {\n  const {\n    type,\n    x1,\n    x2,\n    y1,\n    y2\n  } = element;\n  switch (type) {\n    case \"line\":\n      const on = onLine(x1, y1, x2, y2, x, y);\n      const start = nearPoint(x, y, x1, y1, \"start\");\n      const end = nearPoint(x, y, x2, y2, \"end\");\n      return start || end || on;\n    case \"rectangle\":\n      const topLeft = nearPoint(x, y, x1, y1, \"tl\");\n      const topRight = nearPoint(x, y, x2, y1, \"tr\");\n      const bottomLeft = nearPoint(x, y, x1, y2, \"bl\");\n      const bottomRight = nearPoint(x, y, x2, y2, \"br\");\n      const inside = x >= x1 && x <= x2 && y >= y1 && y <= y2 ? \"inside\" : null;\n      return topLeft || topRight || bottomLeft || bottomRight || inside;\n    case \"pencil\":\n      const betweenAnyPoint = element.points.some((point, index) => {\n        const nextPoint = element.points[index + 1];\n        if (!nextPoint) return false;\n        return onLine(point.x, point.y, nextPoint.x, nextPoint.y, x, y, 5) != null;\n      });\n      return betweenAnyPoint ? \"inside\" : null;\n    case \"text\":\n      return x >= x1 && x <= x2 && y >= y1 && y <= y2 ? \"inside\" : null;\n    default:\n      throw new Error(`Type not recognised: ${type}`);\n  }\n};\nconst distance = (a, b) => Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\nconst getElementAtPosition = (x, y, elements) => {\n  return elements.map(element => ({\n    ...element,\n    position: positionWithinElement(x, y, element)\n  })).find(element => element.position !== null);\n};\nconst adjustElementCoordinates = element => {\n  const {\n    type,\n    x1,\n    y1,\n    x2,\n    y2\n  } = element;\n  if (type === \"rectangle\") {\n    const minX = Math.min(x1, x2);\n    const maxX = Math.max(x1, x2);\n    const minY = Math.min(y1, y2);\n    const maxY = Math.max(y1, y2);\n    return {\n      x1: minX,\n      y1: minY,\n      x2: maxX,\n      y2: maxY\n    };\n  } else {\n    if (x1 < x2 || x1 === x2 && y1 < y2) {\n      return {\n        x1,\n        y1,\n        x2,\n        y2\n      };\n    } else {\n      return {\n        x1: x2,\n        y1: y2,\n        x2: x1,\n        y2: y1\n      };\n    }\n  }\n};\nconst cursorForPosition = position => {\n  switch (position) {\n    case \"tl\":\n    case \"br\":\n    case \"start\":\n    case \"end\":\n      return \"nwse-resize\";\n    case \"tr\":\n    case \"bl\":\n      return \"nesw-resize\";\n    default:\n      return \"move\";\n  }\n};\nconst resizedCoordinates = (clientX, clientY, position, coordinates) => {\n  const {\n    x1,\n    y1,\n    x2,\n    y2\n  } = coordinates;\n  switch (position) {\n    case \"tl\":\n    case \"start\":\n      return {\n        x1: clientX,\n        y1: clientY,\n        x2,\n        y2\n      };\n    case \"tr\":\n      return {\n        x1,\n        y1: clientY,\n        x2: clientX,\n        y2\n      };\n    case \"bl\":\n      return {\n        x1: clientX,\n        y1,\n        x2,\n        y2: clientY\n      };\n    case \"br\":\n    case \"end\":\n      return {\n        x1,\n        y1,\n        x2: clientX,\n        y2: clientY\n      };\n    default:\n      return null;\n    //should not really get here...\n  }\n};\n\nconst useHistory = initialState => {\n  _s();\n  const [index, setIndex] = useState(0);\n  const [history, setHistory] = useState([initialState]);\n  const setState = (action, overwrite = false) => {\n    const newState = typeof action === \"function\" ? action(history[index]) : action;\n    if (overwrite) {\n      const historyCopy = [...history];\n      historyCopy[index] = newState;\n      setHistory(historyCopy);\n    } else {\n      const updatedState = [...history].slice(0, index + 1);\n      setHistory([...updatedState, newState]);\n      setIndex(prevState => prevState + 1);\n    }\n  };\n  const undo = () => index > 0 && setIndex(prevState => prevState - 1);\n  const redo = () => index < history.length - 1 && setIndex(prevState => prevState + 1);\n  return [history[index], setState, undo, redo];\n};\n_s(useHistory, \"iEmo9NqplUe5E9Qu5A/1RO54SF0=\");\nconst getSvgPathFromStroke = stroke => {\n  if (!stroke.length) return \"\";\n  const d = stroke.reduce((acc, [x0, y0], i, arr) => {\n    const [x1, y1] = arr[(i + 1) % arr.length];\n    acc.push(x0, y0, (x0 + x1) / 2, (y0 + y1) / 2);\n    return acc;\n  }, [\"M\", ...stroke[0], \"Q\"]);\n  d.push(\"Z\");\n  return d.join(\" \");\n};\nconst drawElement = (roughCanvas, context, element) => {\n  switch (element.type) {\n    case \"line\":\n    case \"rectangle\":\n      roughCanvas.draw(element.roughElement);\n      break;\n    case \"pencil\":\n      const stroke = getSvgPathFromStroke(getStroke(element.points));\n      context.fill(new Path2D(stroke));\n      break;\n    case \"text\":\n      context.textBaseline = \"top\";\n      context.font = \"24px sans-serif\";\n      context.fillText(element.text, element.x1, element.y1);\n      break;\n    default:\n      throw new Error(`Type not recognised: ${element.type}`);\n  }\n};\nconst adjustmentRequired = type => [\"line\", \"rectangle\"].includes(type);\nconst usePressedKeys = () => {\n  _s2();\n  const [pressedKeys, setPressedKeys] = useState(new Set());\n  useEffect(() => {\n    const handleKeyDown = event => {\n      setPressedKeys(prevKeys => new Set(prevKeys).add(event.key));\n    };\n    const handleKeyUp = event => {\n      setPressedKeys(prevKeys => {\n        const updatedKeys = new Set(prevKeys);\n        updatedKeys.delete(event.key);\n        return updatedKeys;\n      });\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    window.addEventListener(\"keyup\", handleKeyUp);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n      window.removeEventListener(\"keyup\", handleKeyUp);\n    };\n  }, []);\n  return pressedKeys;\n};\n_s2(usePressedKeys, \"xlb7PG5d5IMfdFYT78NuKdshtGo=\");\nconst Room = ({\n  userNo,\n  socket,\n  setUsers,\n  setUserNo\n}) => {\n  _s3();\n  const canvasRef = useRef(null);\n  const ctx = useRef(null);\n  const [color, setColor] = useState(\"#000000\");\n  const [elements, setElements] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [tool, setTool] = useState(\"pencil\");\n  useEffect(() => {\n    socket.on(\"message\", data => {\n      alert(data.message);\n    });\n  }, [socket]);\n  useEffect(() => {\n    socket.on(\"users\", data => {\n      setUsers(data);\n      setUserNo(data.length);\n    });\n  }, [setUsers, setUserNo, socket]);\n  const clearCanvas = () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext(\"2d\");\n    context.fillStyle = \"white\";\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    setElements([]);\n  };\n  const undo = () => {\n    setHistory(prevHistory => [...prevHistory, elements[elements.length - 1]]);\n    setElements(prevElements => prevElements.filter((ele, index) => index !== elements.length - 1));\n  };\n  const redo = () => {\n    setElements(prevElements => [...prevElements, history[history.length - 1]]);\n    setHistory(prevHistory => prevHistory.filter((ele, index) => index !== history.length - 1));\n  };\n  useLayoutEffect(() => {\n    const canvas = document.getElementById(\"canvas\");\n    const context = canvas.getContext(\"2d\");\n    const roughCanvas = rough.canvas(canvas);\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    context.save();\n    context.translate(panOffset.x, panOffset.y);\n    elements.forEach(element => {\n      if (action === \"writing\" && selectedElement.id === element.id) return;\n      drawElement(roughCanvas, context, element);\n    });\n    context.restore();\n  }, [elements, action, selectedElement, panOffset]);\n  useEffect(() => {\n    const undoRedoFunction = event => {\n      if ((event.metaKey || event.ctrlKey) && event.key === \"z\") {\n        if (event.shiftKey) {\n          redo();\n        } else {\n          undo();\n        }\n      }\n    };\n    document.addEventListener(\"keydown\", undoRedoFunction);\n    return () => {\n      document.removeEventListener(\"keydown\", undoRedoFunction);\n    };\n  }, [undo, redo]);\n  useEffect(() => {\n    const panFunction = event => {\n      setPanOffset(prevState => ({\n        x: prevState.x - event.deltaX,\n        y: prevState.y - event.deltaY\n      }));\n    };\n    document.addEventListener(\"wheel\", panFunction);\n    return () => {\n      document.removeEventListener(\"wheel\", panFunction);\n    };\n  }, []);\n  useEffect(() => {\n    const textArea = textAreaRef.current;\n    if (action === \"writing\") {\n      setTimeout(() => {\n        textArea.focus();\n        textArea.value = selectedElement.text;\n      }, 0);\n    }\n  }, [action, selectedElement]);\n  const updateElement = (id, x1, y1, x2, y2, type, options) => {\n    const elementsCopy = [...elements];\n    switch (type) {\n      case \"line\":\n      case \"rectangle\":\n        elementsCopy[id] = createElement(id, x1, y1, x2, y2, type);\n        break;\n      case \"pencil\":\n        elementsCopy[id].points = [...elementsCopy[id].points, {\n          x: x2,\n          y: y2\n        }];\n        break;\n      case \"text\":\n        const textWidth = document.getElementById(\"canvas\").getContext(\"2d\").measureText(options.text).width;\n        const textHeight = 24;\n        elementsCopy[id] = {\n          ...createElement(id, x1, y1, x1 + textWidth, y1 + textHeight, type),\n          text: options.text\n        };\n        break;\n      default:\n        throw new Error(`Type not recognised: ${type}`);\n    }\n    setElements(elementsCopy, true);\n  };\n  const getMouseCoordinates = event => {\n    const clientX = event.clientX - panOffset.x;\n    const clientY = event.clientY - panOffset.y;\n    return {\n      clientX,\n      clientY\n    };\n  };\n  const handleMouseDown = event => {\n    if (action === \"writing\") return;\n    const {\n      clientX,\n      clientY\n    } = getMouseCoordinates(event);\n    if (event.button === 1 || pressedKeys.has(\" \")) {\n      setAction(\"panning\");\n      setStartPanMousePosition({\n        x: clientX,\n        y: clientY\n      });\n      return;\n    }\n    if (tool === \"selection\") {\n      const element = getElementAtPosition(clientX, clientY, elements);\n      if (element) {\n        if (element.type === \"pencil\") {\n          const xOffsets = element.points.map(point => clientX - point.x);\n          const yOffsets = element.points.map(point => clientY - point.y);\n          setSelectedElement({\n            ...element,\n            xOffsets,\n            yOffsets\n          });\n        } else {\n          const offsetX = clientX - element.x1;\n          const offsetY = clientY - element.y1;\n          setSelectedElement({\n            ...element,\n            offsetX,\n            offsetY\n          });\n        }\n        setElements(prevState => prevState);\n        if (element.position === \"inside\") {\n          setAction(\"moving\");\n        } else {\n          setAction(\"resizing\");\n        }\n      }\n    } else {\n      const id = elements.length;\n      const element = createElement(id, clientX, clientY, clientX, clientY, tool);\n      setElements(prevState => [...prevState, element]);\n      setSelectedElement(element);\n      setAction(tool === \"text\" ? \"writing\" : \"drawing\");\n    }\n  };\n  const handleMouseMove = event => {\n    const {\n      clientX,\n      clientY\n    } = getMouseCoordinates(event);\n    if (action === \"panning\") {\n      const deltaX = clientX - startPanMousePosition.x;\n      const deltaY = clientY - startPanMousePosition.y;\n      setPanOffset({\n        x: panOffset.x + deltaX,\n        y: panOffset.y + deltaY\n      });\n      return;\n    }\n    if (tool === \"selection\") {\n      const element = getElementAtPosition(clientX, clientY, elements);\n      event.target.style.cursor = element ? cursorForPosition(element.position) : \"default\";\n    }\n    if (action === \"drawing\") {\n      const index = elements.length - 1;\n      const {\n        x1,\n        y1\n      } = elements[index];\n      updateElement(index, x1, y1, clientX, clientY, tool);\n    } else if (action === \"moving\") {\n      if (selectedElement.type === \"pencil\") {\n        const newPoints = selectedElement.points.map((_, index) => ({\n          x: clientX - selectedElement.xOffsets[index],\n          y: clientY - selectedElement.yOffsets[index]\n        }));\n        const elementsCopy = [...elements];\n        elementsCopy[selectedElement.id] = {\n          ...elementsCopy[selectedElement.id],\n          points: newPoints\n        };\n        setElements(elementsCopy, true);\n      } else {\n        const {\n          id,\n          x1,\n          x2,\n          y1,\n          y2,\n          type,\n          offsetX,\n          offsetY\n        } = selectedElement;\n        const width = x2 - x1;\n        const height = y2 - y1;\n        const newX1 = clientX - offsetX;\n        const newY1 = clientY - offsetY;\n        const options = type === \"text\" ? {\n          text: selectedElement.text\n        } : {};\n        updateElement(id, newX1, newY1, newX1 + width, newY1 + height, type, options);\n      }\n    } else if (action === \"resizing\") {\n      const {\n        id,\n        type,\n        position,\n        ...coordinates\n      } = selectedElement;\n      const {\n        x1,\n        y1,\n        x2,\n        y2\n      } = resizedCoordinates(clientX, clientY, position, coordinates);\n      updateElement(id, x1, y1, x2, y2, type);\n    }\n  };\n  const handleMouseUp = event => {\n    const {\n      clientX,\n      clientY\n    } = getMouseCoordinates(event);\n    if (selectedElement) {\n      if (selectedElement.type === \"text\" && clientX - selectedElement.offsetX === selectedElement.x1 && clientY - selectedElement.offsetY === selectedElement.y1) {\n        setAction(\"writing\");\n        return;\n      }\n      const index = selectedElement.id;\n      const {\n        id,\n        type\n      } = elements[index];\n      if ((action === \"drawing\" || action === \"resizing\") && adjustmentRequired(type)) {\n        const {\n          x1,\n          y1,\n          x2,\n          y2\n        } = adjustElementCoordinates(elements[index]);\n        updateElement(id, x1, y1, x2, y2, type);\n      }\n    }\n    if (action === \"writing\") return;\n    setAction(\"none\");\n    setSelectedElement(null);\n  };\n  const handleBlur = event => {\n    const {\n      id,\n      x1,\n      y1,\n      type\n    } = selectedElement;\n    setAction(\"none\");\n    setSelectedElement(null);\n    updateElement(id, x1, y1, null, null, type, {\n      text: event.target.value\n    });\n  };\n  const saveImageToLocal = () => {\n    const canvas = canvasRef.current;\n    const link = document.createElement('a');\n    canvas.toBlob(blob => {\n      const url = URL.createObjectURL(blob);\n      link.href = url;\n      link.download = 'canvas.png';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n    }, 'image/png');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"display-5 pt-4 pb-3 text-center\",\n        children: [\"Whiteboard -\", userNo]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row justify-content-center align-items-center text-center py-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"color-picker d-flex align-items-center justify-content-center\",\n          children: [\"Color Picker : \\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"color\",\n            value: color,\n            onChange: e => setColor(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-check form-check-inline\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-check-input\",\n            type: \"radio\",\n            name: \"tools\",\n            id: \"pencil\",\n            value: \"pencil\",\n            checked: tool === \"pencil\",\n            onClick: e => setTool(e.target.value),\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-check-label\",\n            htmlFor: \"pencil\",\n            children: \"Pencil\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-check form-check-inline\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-check-input\",\n            type: \"radio\",\n            name: \"tools\",\n            id: \"line\",\n            value: \"line\",\n            checked: tool === \"line\",\n            onClick: e => setTool(e.target.value),\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-check-label\",\n            htmlFor: \"line\",\n            children: \"Line\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-check form-check-inline\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-check-input\",\n            type: \"radio\",\n            name: \"tools\",\n            id: \"rect\",\n            value: \"rect\",\n            checked: tool === \"rect\",\n            onClick: e => setTool(e.target.value),\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-check-label\",\n            htmlFor: \"rect\",\n            children: \"Rectangle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 551,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-outline-primary\",\n          disabled: elements.length === 0,\n          onClick: () => undo(),\n          children: \"Undo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }, this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-outline-primary ml-1\",\n          disabled: history.length < 1,\n          onClick: () => redo(),\n          children: \"Redo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-1\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"color-picker d-flex align-items-center justify-content-center col\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"button\",\n              className: \"btn btn-danger\",\n              value: \"clear canvas\",\n              onClick: clearCanvas\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary\",\n              onClick: saveImageToLocal,\n              children: \"Download Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 590,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              id: \"selection\",\n              checked: tool === \"selection\",\n              onChange: () => setTool(\"selection\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"selection\",\n              children: \"Selection\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 599,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 603,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row justify-content-start align-items-start text-start py-2\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          id: \"text\",\n          checked: tool === \"text\",\n          onChange: () => setTool(\"text\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"text\",\n          children: \"Text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(Canvas, {\n        canvasRef: canvasRef,\n        ctx: ctx,\n        color: color,\n        setElements: setElements,\n        elements: elements,\n        tool: tool,\n        socket: socket\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 492,\n    columnNumber: 5\n  }, this);\n};\n_s3(Room, \"MI1J16ZTajUbHj1v1qnFlNbMMps=\");\n_c = Room;\nexport default Room;\nvar _c;\n$RefreshReg$(_c, \"Room\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Canvas","jsxDEV","_jsxDEV","generator","rough","createElement","id","x1","y1","x2","y2","type","roughElement","line","rectangle","points","x","y","text","Error","nearPoint","name","Math","abs","onLine","maxDistance","a","b","c","offset","distance","positionWithinElement","element","on","start","end","topLeft","topRight","bottomLeft","bottomRight","inside","betweenAnyPoint","some","point","index","nextPoint","sqrt","pow","getElementAtPosition","elements","map","position","find","adjustElementCoordinates","minX","min","maxX","max","minY","maxY","cursorForPosition","resizedCoordinates","clientX","clientY","coordinates","useHistory","initialState","_s","setIndex","history","setHistory","setState","action","overwrite","newState","historyCopy","updatedState","slice","prevState","undo","redo","length","getSvgPathFromStroke","stroke","d","reduce","acc","x0","y0","i","arr","push","join","drawElement","roughCanvas","context","draw","getStroke","fill","Path2D","textBaseline","font","fillText","adjustmentRequired","includes","usePressedKeys","_s2","pressedKeys","setPressedKeys","Set","handleKeyDown","event","prevKeys","add","key","handleKeyUp","updatedKeys","delete","window","addEventListener","removeEventListener","Room","userNo","socket","setUsers","setUserNo","_s3","canvasRef","ctx","color","setColor","setElements","tool","setTool","data","alert","message","clearCanvas","canvas","current","getContext","fillStyle","fillRect","width","height","prevHistory","prevElements","filter","ele","useLayoutEffect","document","getElementById","clearRect","save","translate","panOffset","forEach","selectedElement","restore","undoRedoFunction","metaKey","ctrlKey","shiftKey","panFunction","setPanOffset","deltaX","deltaY","textArea","textAreaRef","setTimeout","focus","value","updateElement","options","elementsCopy","textWidth","measureText","textHeight","getMouseCoordinates","handleMouseDown","button","has","setAction","setStartPanMousePosition","xOffsets","yOffsets","setSelectedElement","offsetX","offsetY","handleMouseMove","startPanMousePosition","target","style","cursor","newPoints","_","newX1","newY1","handleMouseUp","handleBlur","saveImageToLocal","link","toBlob","blob","url","URL","createObjectURL","href","download","body","appendChild","click","removeChild","revokeObjectURL","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","e","checked","onClick","readOnly","htmlFor","disabled","_c","$RefreshReg$"],"sources":["D:/full stack mern,mean,java/Whiteboard Application/whiteboard-frontend/src/pages/canvas/Room.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\n// import { toast } from \"react-toastify\";\r\nimport Canvas from \"./canvas\";\r\n\r\n\r\n\r\nconst generator = rough.generator();\r\n\r\nconst createElement = (id, x1, y1, x2, y2, type) => {\r\n  switch (type) {\r\n    case \"line\":\r\n    case \"rectangle\":\r\n      const roughElement =\r\n        type === \"line\"\r\n          ? generator.line(x1, y1, x2, y2)\r\n          : generator.rectangle(x1, y1, x2 - x1, y2 - y1);\r\n      return { id, x1, y1, x2, y2, type, roughElement };\r\n    case \"pencil\":\r\n      return { id, type, points: [{ x: x1, y: y1 }] };\r\n    case \"text\":\r\n      return { id, type, x1, y1, x2, y2, text: \"\" };\r\n    default:\r\n      throw new Error(`Type not recognised: ${type}`);\r\n  }\r\n};\r\n\r\nconst nearPoint = (x, y, x1, y1, name) => {\r\n  return Math.abs(x - x1) < 5 && Math.abs(y - y1) < 5 ? name : null;\r\n};\r\n\r\nconst onLine = (x1, y1, x2, y2, x, y, maxDistance = 1) => {\r\n  const a = { x: x1, y: y1 };\r\n  const b = { x: x2, y: y2 };\r\n  const c = { x, y };\r\n  const offset = distance(a, b) - (distance(a, c) + distance(b, c));\r\n  return Math.abs(offset) < maxDistance ? \"inside\" : null;\r\n};\r\n\r\nconst positionWithinElement = (x, y, element) => {\r\n  const { type, x1, x2, y1, y2 } = element;\r\n  switch (type) {\r\n    case \"line\":\r\n      const on = onLine(x1, y1, x2, y2, x, y);\r\n      const start = nearPoint(x, y, x1, y1, \"start\");\r\n      const end = nearPoint(x, y, x2, y2, \"end\");\r\n      return start || end || on;\r\n    case \"rectangle\":\r\n      const topLeft = nearPoint(x, y, x1, y1, \"tl\");\r\n      const topRight = nearPoint(x, y, x2, y1, \"tr\");\r\n      const bottomLeft = nearPoint(x, y, x1, y2, \"bl\");\r\n      const bottomRight = nearPoint(x, y, x2, y2, \"br\");\r\n      const inside = x >= x1 && x <= x2 && y >= y1 && y <= y2 ? \"inside\" : null;\r\n      return topLeft || topRight || bottomLeft || bottomRight || inside;\r\n    case \"pencil\":\r\n      const betweenAnyPoint = element.points.some((point, index) => {\r\n        const nextPoint = element.points[index + 1];\r\n        if (!nextPoint) return false;\r\n        return onLine(point.x, point.y, nextPoint.x, nextPoint.y, x, y, 5) != null;\r\n      });\r\n      return betweenAnyPoint ? \"inside\" : null;\r\n    case \"text\":\r\n      return x >= x1 && x <= x2 && y >= y1 && y <= y2 ? \"inside\" : null;\r\n    default:\r\n      throw new Error(`Type not recognised: ${type}`);\r\n  }\r\n};\r\n\r\nconst distance = (a, b) => Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\r\n\r\nconst getElementAtPosition = (x, y, elements) => {\r\n  return elements\r\n    .map(element => ({ ...element, position: positionWithinElement(x, y, element) }))\r\n    .find(element => element.position !== null);\r\n};\r\n\r\nconst adjustElementCoordinates = element => {\r\n  const { type, x1, y1, x2, y2 } = element;\r\n  if (type === \"rectangle\") {\r\n    const minX = Math.min(x1, x2);\r\n    const maxX = Math.max(x1, x2);\r\n    const minY = Math.min(y1, y2);\r\n    const maxY = Math.max(y1, y2);\r\n    return { x1: minX, y1: minY, x2: maxX, y2: maxY };\r\n  } else {\r\n    if (x1 < x2 || (x1 === x2 && y1 < y2)) {\r\n      return { x1, y1, x2, y2 };\r\n    } else {\r\n      return { x1: x2, y1: y2, x2: x1, y2: y1 };\r\n    }\r\n  }\r\n};\r\n\r\nconst cursorForPosition = position => {\r\n  switch (position) {\r\n    case \"tl\":\r\n    case \"br\":\r\n    case \"start\":\r\n    case \"end\":\r\n      return \"nwse-resize\";\r\n    case \"tr\":\r\n    case \"bl\":\r\n      return \"nesw-resize\";\r\n    default:\r\n      return \"move\";\r\n  }\r\n};\r\n\r\nconst resizedCoordinates = (clientX, clientY, position, coordinates) => {\r\n  const { x1, y1, x2, y2 } = coordinates;\r\n  switch (position) {\r\n    case \"tl\":\r\n    case \"start\":\r\n      return { x1: clientX, y1: clientY, x2, y2 };\r\n    case \"tr\":\r\n      return { x1, y1: clientY, x2: clientX, y2 };\r\n    case \"bl\":\r\n      return { x1: clientX, y1, x2, y2: clientY };\r\n    case \"br\":\r\n    case \"end\":\r\n      return { x1, y1, x2: clientX, y2: clientY };\r\n    default:\r\n      return null; //should not really get here...\r\n  }\r\n};\r\n\r\nconst useHistory = initialState => {\r\n  const [index, setIndex] = useState(0);\r\n  const [history, setHistory] = useState([initialState]);\r\n\r\n  const setState = (action, overwrite = false) => {\r\n    const newState = typeof action === \"function\" ? action(history[index]) : action;\r\n    if (overwrite) {\r\n      const historyCopy = [...history];\r\n      historyCopy[index] = newState;\r\n      setHistory(historyCopy);\r\n    } else {\r\n      const updatedState = [...history].slice(0, index + 1);\r\n      setHistory([...updatedState, newState]);\r\n      setIndex(prevState => prevState + 1);\r\n    }\r\n  };\r\n\r\n  const undo = () => index > 0 && setIndex(prevState => prevState - 1);\r\n  const redo = () => index < history.length - 1 && setIndex(prevState => prevState + 1);\r\n\r\n  return [history[index], setState, undo, redo];\r\n};\r\n\r\nconst getSvgPathFromStroke = stroke => {\r\n  if (!stroke.length) return \"\";\r\n\r\n  const d = stroke.reduce(\r\n    (acc, [x0, y0], i, arr) => {\r\n      const [x1, y1] = arr[(i + 1) % arr.length];\r\n      acc.push(x0, y0, (x0 + x1) / 2, (y0 + y1) / 2);\r\n      return acc;\r\n    },\r\n    [\"M\", ...stroke[0], \"Q\"]\r\n  );\r\n\r\n  d.push(\"Z\");\r\n  return d.join(\" \");\r\n};\r\n\r\nconst drawElement = (roughCanvas, context, element) => {\r\n  switch (element.type) {\r\n    case \"line\":\r\n    case \"rectangle\":\r\n      roughCanvas.draw(element.roughElement);\r\n      break;\r\n    case \"pencil\":\r\n      const stroke = getSvgPathFromStroke(getStroke(element.points));\r\n      context.fill(new Path2D(stroke));\r\n      break;\r\n    case \"text\":\r\n      context.textBaseline = \"top\";\r\n      context.font = \"24px sans-serif\";\r\n      context.fillText(element.text, element.x1, element.y1);\r\n      break;\r\n    default:\r\n      throw new Error(`Type not recognised: ${element.type}`);\r\n  }\r\n};\r\n\r\nconst adjustmentRequired = type => [\"line\", \"rectangle\"].includes(type);\r\n\r\nconst usePressedKeys = () => {\r\n  const [pressedKeys, setPressedKeys] = useState(new Set());\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = event => {\r\n      setPressedKeys(prevKeys => new Set(prevKeys).add(event.key));\r\n    };\r\n\r\n    const handleKeyUp = event => {\r\n      setPressedKeys(prevKeys => {\r\n        const updatedKeys = new Set(prevKeys);\r\n        updatedKeys.delete(event.key);\r\n        return updatedKeys;\r\n      });\r\n    };\r\n\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    window.addEventListener(\"keyup\", handleKeyUp);\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", handleKeyDown);\r\n      window.removeEventListener(\"keyup\", handleKeyUp);\r\n    };\r\n  }, []);\r\n\r\n  return pressedKeys;\r\n};\r\n\r\nconst Room = ({ userNo, socket, setUsers, setUserNo }) => {\r\n  const canvasRef = useRef(null);\r\n  const ctx = useRef(null);\r\n  const [color, setColor] = useState(\"#000000\");\r\n  const [elements, setElements] = useState([]);\r\n  const [history, setHistory] = useState([]);\r\n  const [tool, setTool] = useState(\"pencil\");\r\n\r\n  useEffect(() => {\r\n    socket.on(\"message\", (data) => {\r\n      alert(data.message);\r\n    });\r\n  }, [socket]);\r\n  useEffect(() => {\r\n    socket.on(\"users\", (data) => {\r\n      setUsers(data);\r\n      setUserNo(data.length);\r\n    });\r\n  }, [setUsers, setUserNo, socket]);\r\n\r\n  const clearCanvas = () => {\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext(\"2d\");\r\n    context.fillStyle = \"white\";\r\n    context.fillRect(0, 0, canvas.width, canvas.height);\r\n    setElements([]);\r\n  };\r\n\r\n  const undo = () => {\r\n    setHistory((prevHistory) => [\r\n      ...prevHistory,\r\n      elements[elements.length - 1],\r\n    ]);\r\n    setElements((prevElements) =>\r\n      prevElements.filter((ele, index) => index !== elements.length - 1)\r\n    );\r\n  };\r\n  const redo = () => {\r\n    setElements((prevElements) => [\r\n      ...prevElements,\r\n      history[history.length - 1],\r\n    ]);\r\n    setHistory((prevHistory) =>\r\n      prevHistory.filter((ele, index) => index !== history.length - 1)\r\n    );\r\n  };\r\n  useLayoutEffect(() => {\r\n    const canvas = document.getElementById(\"canvas\");\r\n    const context = canvas.getContext(\"2d\");\r\n    const roughCanvas = rough.canvas(canvas);\r\n\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    context.save();\r\n    context.translate(panOffset.x, panOffset.y);\r\n\r\n    elements.forEach(element => {\r\n      if (action === \"writing\" && selectedElement.id === element.id) return;\r\n      drawElement(roughCanvas, context, element);\r\n    });\r\n    context.restore();\r\n  }, [elements, action, selectedElement, panOffset]);\r\n\r\n  useEffect(() => {\r\n    const undoRedoFunction = event => {\r\n      if ((event.metaKey || event.ctrlKey) && event.key === \"z\") {\r\n        if (event.shiftKey) {\r\n          redo();\r\n        } else {\r\n          undo();\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"keydown\", undoRedoFunction);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", undoRedoFunction);\r\n    };\r\n  }, [undo, redo]);\r\n\r\n  useEffect(() => {\r\n    const panFunction = event => {\r\n      setPanOffset(prevState => ({\r\n        x: prevState.x - event.deltaX,\r\n        y: prevState.y - event.deltaY,\r\n      }));\r\n    };\r\n\r\n    document.addEventListener(\"wheel\", panFunction);\r\n    return () => {\r\n      document.removeEventListener(\"wheel\", panFunction);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const textArea = textAreaRef.current;\r\n    if (action === \"writing\") {\r\n      setTimeout(() => {\r\n        textArea.focus();\r\n        textArea.value = selectedElement.text;\r\n      }, 0);\r\n    }\r\n  }, [action, selectedElement]);\r\n\r\n  const updateElement = (id, x1, y1, x2, y2, type, options) => {\r\n    const elementsCopy = [...elements];\r\n\r\n    switch (type) {\r\n      case \"line\":\r\n      case \"rectangle\":\r\n        elementsCopy[id] = createElement(id, x1, y1, x2, y2, type);\r\n        break;\r\n      case \"pencil\":\r\n        elementsCopy[id].points = [...elementsCopy[id].points, { x: x2, y: y2 }];\r\n        break;\r\n      case \"text\":\r\n        const textWidth = document\r\n          .getElementById(\"canvas\")\r\n          .getContext(\"2d\")\r\n          .measureText(options.text).width;\r\n        const textHeight = 24;\r\n        elementsCopy[id] = {\r\n          ...createElement(id, x1, y1, x1 + textWidth, y1 + textHeight, type),\r\n          text: options.text,\r\n        };\r\n        break;\r\n      default:\r\n        throw new Error(`Type not recognised: ${type}`);\r\n    }\r\n\r\n    setElements(elementsCopy, true);\r\n  };\r\n\r\n  const getMouseCoordinates = event => {\r\n    const clientX = event.clientX - panOffset.x;\r\n    const clientY = event.clientY - panOffset.y;\r\n    return { clientX, clientY };\r\n  };\r\n\r\n  const handleMouseDown = event => {\r\n    if (action === \"writing\") return;\r\n\r\n    const { clientX, clientY } = getMouseCoordinates(event);\r\n\r\n    if (event.button === 1 || pressedKeys.has(\" \")) {\r\n      setAction(\"panning\");\r\n      setStartPanMousePosition({ x: clientX, y: clientY });\r\n      return;\r\n    }\r\n\r\n    if (tool === \"selection\") {\r\n      const element = getElementAtPosition(clientX, clientY, elements);\r\n      if (element) {\r\n        if (element.type === \"pencil\") {\r\n          const xOffsets = element.points.map(point => clientX - point.x);\r\n          const yOffsets = element.points.map(point => clientY - point.y);\r\n          setSelectedElement({ ...element, xOffsets, yOffsets });\r\n        } else {\r\n          const offsetX = clientX - element.x1;\r\n          const offsetY = clientY - element.y1;\r\n          setSelectedElement({ ...element, offsetX, offsetY });\r\n        }\r\n        setElements(prevState => prevState);\r\n\r\n        if (element.position === \"inside\") {\r\n          setAction(\"moving\");\r\n        } else {\r\n          setAction(\"resizing\");\r\n        }\r\n      }\r\n    } else {\r\n      const id = elements.length;\r\n      const element = createElement(id, clientX, clientY, clientX, clientY, tool);\r\n      setElements(prevState => [...prevState, element]);\r\n      setSelectedElement(element);\r\n\r\n      setAction(tool === \"text\" ? \"writing\" : \"drawing\");\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = event => {\r\n    const { clientX, clientY } = getMouseCoordinates(event);\r\n\r\n    if (action === \"panning\") {\r\n      const deltaX = clientX - startPanMousePosition.x;\r\n      const deltaY = clientY - startPanMousePosition.y;\r\n      setPanOffset({\r\n        x: panOffset.x + deltaX,\r\n        y: panOffset.y + deltaY,\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (tool === \"selection\") {\r\n      const element = getElementAtPosition(clientX, clientY, elements);\r\n      event.target.style.cursor = element ? cursorForPosition(element.position) : \"default\";\r\n    }\r\n\r\n    if (action === \"drawing\") {\r\n      const index = elements.length - 1;\r\n      const { x1, y1 } = elements[index];\r\n      updateElement(index, x1, y1, clientX, clientY, tool);\r\n    } else if (action === \"moving\") {\r\n      if (selectedElement.type === \"pencil\") {\r\n        const newPoints = selectedElement.points.map((_, index) => ({\r\n          x: clientX - selectedElement.xOffsets[index],\r\n          y: clientY - selectedElement.yOffsets[index],\r\n        }));\r\n        const elementsCopy = [...elements];\r\n        elementsCopy[selectedElement.id] = {\r\n          ...elementsCopy[selectedElement.id],\r\n          points: newPoints,\r\n        };\r\n        setElements(elementsCopy, true);\r\n      } else {\r\n        const { id, x1, x2, y1, y2, type, offsetX, offsetY } = selectedElement;\r\n        const width = x2 - x1;\r\n        const height = y2 - y1;\r\n        const newX1 = clientX - offsetX;\r\n        const newY1 = clientY - offsetY;\r\n        const options = type === \"text\" ? { text: selectedElement.text } : {};\r\n        updateElement(id, newX1, newY1, newX1 + width, newY1 + height, type, options);\r\n      }\r\n    } else if (action === \"resizing\") {\r\n      const { id, type, position, ...coordinates } = selectedElement;\r\n      const { x1, y1, x2, y2 } = resizedCoordinates(clientX, clientY, position, coordinates);\r\n      updateElement(id, x1, y1, x2, y2, type);\r\n    }\r\n  };\r\n\r\n  const handleMouseUp = event => {\r\n    const { clientX, clientY } = getMouseCoordinates(event);\r\n    if (selectedElement) {\r\n      if (\r\n        selectedElement.type === \"text\" &&\r\n        clientX - selectedElement.offsetX === selectedElement.x1 &&\r\n        clientY - selectedElement.offsetY === selectedElement.y1\r\n      ) {\r\n        setAction(\"writing\");\r\n        return;\r\n      }\r\n\r\n      const index = selectedElement.id;\r\n      const { id, type } = elements[index];\r\n      if ((action === \"drawing\" || action === \"resizing\") && adjustmentRequired(type)) {\r\n        const { x1, y1, x2, y2 } = adjustElementCoordinates(elements[index]);\r\n        updateElement(id, x1, y1, x2, y2, type);\r\n      }\r\n    }\r\n\r\n    if (action === \"writing\") return;\r\n\r\n    setAction(\"none\");\r\n    setSelectedElement(null);\r\n  };\r\n\r\n  const handleBlur = event => {\r\n    const { id, x1, y1, type } = selectedElement;\r\n    setAction(\"none\");\r\n    setSelectedElement(null);\r\n    updateElement(id, x1, y1, null, null, type, { text: event.target.value });\r\n  };\r\n  const saveImageToLocal = () => {\r\n    const canvas = canvasRef.current;\r\n    const link = document.createElement('a');\r\n\r\n    canvas.toBlob((blob) => {\r\n      const url = URL.createObjectURL(blob);\r\n      link.href = url;\r\n      link.download = 'canvas.png';\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      URL.revokeObjectURL(url);\r\n    }, 'image/png');\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <h1 className=\"display-5 pt-4 pb-3 text-center\">\r\n          Whiteboard -{userNo}\r\n        </h1>\r\n      </div>\r\n      <div className=\"row justify-content-center align-items-center text-center py-2\">\r\n        <div className=\"col-md-2\">\r\n          <div className=\"color-picker d-flex align-items-center justify-content-center\">\r\n            Color Picker : &nbsp;\r\n            <input\r\n              type=\"color\"\r\n              value={color}\r\n              onChange={(e) => setColor(e.target.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-3\">\r\n          <div className=\"form-check form-check-inline\">\r\n            <input\r\n              className=\"form-check-input\"\r\n              type=\"radio\"\r\n              name=\"tools\"\r\n              id=\"pencil\"\r\n              value=\"pencil\"\r\n              checked={tool === \"pencil\"}\r\n              onClick={(e) => setTool(e.target.value)}\r\n              readOnly={true}\r\n            />\r\n            <label className=\"form-check-label\" htmlFor=\"pencil\">\r\n              Pencil\r\n            </label>\r\n          </div>\r\n          <div className=\"form-check form-check-inline\">\r\n            <input\r\n              className=\"form-check-input\"\r\n              type=\"radio\"\r\n              name=\"tools\"\r\n              id=\"line\"\r\n              value=\"line\"\r\n              checked={tool === \"line\"}\r\n              onClick={(e) => setTool(e.target.value)}\r\n              readOnly={true}\r\n            />\r\n            <label className=\"form-check-label\" htmlFor=\"line\">\r\n              Line\r\n            </label>\r\n          </div>\r\n          <div className=\"form-check form-check-inline\">\r\n            <input\r\n              className=\"form-check-input\"\r\n              type=\"radio\"\r\n              name=\"tools\"\r\n              id=\"rect\"\r\n              value=\"rect\"\r\n              checked={tool === \"rect\"}\r\n              onClick={(e) => setTool(e.target.value)}\r\n              readOnly={true}\r\n            />\r\n            <label className=\"form-check-label\" htmlFor=\"rect\">\r\n              Rectangle\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-md-2\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-primary\"\r\n            disabled={elements.length === 0}\r\n            onClick={() => undo()}\r\n          >\r\n            Undo\r\n          </button>\r\n          &nbsp;&nbsp;\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline-primary ml-1\"\r\n            disabled={history.length < 1}\r\n            onClick={() => redo()}\r\n          >\r\n            Redo\r\n          </button>\r\n\r\n        </div>\r\n\r\n        <div className=\"col-md-1\">\r\n          <div className=\"row\">\r\n            <div className=\"color-picker d-flex align-items-center justify-content-center col\">\r\n              <input\r\n                type=\"button\"\r\n                className=\"btn btn-danger\"\r\n                value=\"clear canvas\"\r\n                onClick={clearCanvas}\r\n              />\r\n            </div>\r\n            <div className=\"col\">\r\n\r\n              <button className=\"btn btn-primary\" onClick={saveImageToLocal}>Download Image</button>\r\n            </div>\r\n            <div className=\"col\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"selection\"\r\n                checked={tool === \"selection\"}\r\n                onChange={() => setTool(\"selection\")}\r\n              />\r\n              <label htmlFor=\"selection\">Selection</label>\r\n            </div>\r\n\r\n\r\n            <div  className=\"col\">\r\n\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n      </div>\r\n\r\n      <div className=\"row justify-content-start align-items-start text-start py-2\">\r\n        <div className=\"col\">\r\n          <input type=\"radio\" id=\"text\" checked={tool === \"text\"} onChange={() => setTool(\"text\")} />\r\n          <label htmlFor=\"text\">Text</label>\r\n        </div>\r\n      </div>\r\n      <div className=\"row\">\r\n        <Canvas\r\n          canvasRef={canvasRef}\r\n          ctx={ctx}\r\n          color={color}\r\n          setElements={setElements}\r\n          elements={elements}\r\n          tool={tool}\r\n          socket={socket}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Room;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}