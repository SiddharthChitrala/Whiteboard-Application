{"ast":null,"code":"var _jsxFileName = \"D:\\\\full stack mern,mean,java\\\\Whiteboard Application\\\\whiteboard-frontend\\\\src\\\\pages\\\\canvas\\\\canvas.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\nimport rough from \"roughjs/bundled/rough.esm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst generator = rough.generator();\nconst Canvas = ({\n  canvasRef,\n  ctx,\n  color,\n  setElements,\n  elements,\n  tool,\n  socket\n}) => {\n  _s();\n  const [isDrawing, setIsDrawing] = useState(false);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    canvas.height = window.innerHeight * 2;\n    canvas.width = window.innerWidth * 2;\n    canvas.style.width = `${window.innerWidth}px`;\n    canvas.style.height = `${window.innerHeight}px`;\n    const context = canvas.getContext(\"2d\");\n    context.strokeWidth = 5;\n    context.scale(2, 2);\n    context.lineCap = \"round\";\n    context.strokeStyle = color;\n    context.lineWidth = 5;\n    ctx.current = context;\n  }, [canvasRef, color, ctx]);\n  useEffect(() => {\n    ctx.current.strokeStyle = color;\n  }, [color, c]);\n  const handleMouseDown = e => {\n    const {\n      offsetX,\n      offsetY\n    } = e.nativeEvent;\n    if (tool === \"pencil\") {\n      setElements(prevElements => [...prevElements, {\n        offsetX,\n        offsetY,\n        path: [[offsetX, offsetY]],\n        stroke: color,\n        element: tool\n      }]);\n    } else {\n      setElements(prevElements => [...prevElements, {\n        offsetX,\n        offsetY,\n        stroke: color,\n        element: tool\n      }]);\n    }\n    setIsDrawing(true);\n  };\n  useLayoutEffect(() => {\n    const roughCanvas = rough.canvas(canvasRef.current);\n    if (elements.length > 0) {\n      ctx.current.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n    }\n    elements.forEach((ele, i) => {\n      if (ele.element === \"rect\") {\n        roughCanvas.draw(generator.rectangle(ele.offsetX, ele.offsetY, ele.width, ele.height, {\n          stroke: ele.stroke,\n          roughness: 0,\n          strokeWidth: 5\n        }));\n      } else if (ele.element === \"line\") {\n        roughCanvas.draw(generator.line(ele.offsetX, ele.offsetY, ele.width, ele.height, {\n          stroke: ele.stroke,\n          roughness: 0,\n          strokeWidth: 5\n        }));\n      } else if (ele.element === \"pencil\") {\n        roughCanvas.linearPath(ele.path, {\n          stroke: ele.stroke,\n          roughness: 0,\n          strokeWidth: 5\n        });\n      }\n    });\n    const canvasImage = canvasRef.current.toDataURL();\n    socket.emit(\"drawing\", canvasImage);\n  }, [elements, canvasRef, ctx, socket]);\n  const handleMouseMove = e => {\n    if (!isDrawing) {\n      return;\n    }\n    const {\n      offsetX,\n      offsetY\n    } = e.nativeEvent;\n    if (tool === \"rect\") {\n      setElements(prevElements => prevElements.map((ele, index) => index === elements.length - 1 ? {\n        offsetX: ele.offsetX,\n        offsetY: ele.offsetY,\n        width: offsetX - ele.offsetX,\n        height: offsetY - ele.offsetY,\n        stroke: ele.stroke,\n        element: ele.element\n      } : ele));\n    } else if (tool === \"line\") {\n      setElements(prevElements => prevElements.map((ele, index) => index === elements.length - 1 ? {\n        offsetX: ele.offsetX,\n        offsetY: ele.offsetY,\n        width: offsetX,\n        height: offsetY,\n        stroke: ele.stroke,\n        element: ele.element\n      } : ele));\n    } else if (tool === \"pencil\") {\n      setElements(prevElements => prevElements.map((ele, index) => index === elements.length - 1 ? {\n        offsetX: ele.offsetX,\n        offsetY: ele.offsetY,\n        path: [...ele.path, [offsetX, offsetY]],\n        stroke: ele.stroke,\n        element: ele.element\n      } : ele));\n    }\n  };\n  const handleMouseUp = () => {\n    setIsDrawing(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-md-8 overflow-hidden border border-dark px-0 mx-auto mt-3\",\n    style: {\n      height: \"500px\"\n    },\n    onMouseDown: handleMouseDown,\n    onMouseMove: handleMouseMove,\n    onMouseUp: handleMouseUp,\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n};\n_s(Canvas, \"msMTcjGTX00fhl9Ndli+Oox7VUQ=\");\n_c = Canvas;\nexport default Canvas;\nvar _c;\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"names":["React","useEffect","useLayoutEffect","useState","rough","jsxDEV","_jsxDEV","generator","Canvas","canvasRef","ctx","color","setElements","elements","tool","socket","_s","isDrawing","setIsDrawing","canvas","current","height","window","innerHeight","width","innerWidth","style","context","getContext","strokeWidth","scale","lineCap","strokeStyle","lineWidth","c","handleMouseDown","e","offsetX","offsetY","nativeEvent","prevElements","path","stroke","element","roughCanvas","length","clearRect","forEach","ele","i","draw","rectangle","roughness","line","linearPath","canvasImage","toDataURL","emit","handleMouseMove","map","index","handleMouseUp","className","onMouseDown","onMouseMove","onMouseUp","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/full stack mern,mean,java/Whiteboard Application/whiteboard-frontend/src/pages/canvas/canvas.jsx"],"sourcesContent":["import React, { useEffect, useLayoutEffect, useState } from \"react\";\r\nimport rough from \"roughjs/bundled/rough.esm\";\r\n\r\nconst generator = rough.generator();\r\nconst Canvas = ({\r\n  canvasRef,\r\n  ctx,\r\n  color,\r\n  setElements,\r\n  elements,\r\n  tool,\r\n  socket,\r\n}) => {\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    canvas.height = window.innerHeight * 2;\r\n    canvas.width = window.innerWidth * 2;\r\n    canvas.style.width = `${window.innerWidth}px`;\r\n    canvas.style.height = `${window.innerHeight}px`;\r\n    const context = canvas.getContext(\"2d\");\r\n\r\n    context.strokeWidth = 5;\r\n    context.scale(2, 2);\r\n    context.lineCap = \"round\";\r\n    context.strokeStyle = color;\r\n    context.lineWidth = 5;\r\n    ctx.current = context;\r\n  }, [canvasRef, color, ctx]);\r\n\r\n  useEffect(() => {\r\n    ctx.current.strokeStyle = color;\r\n  }, [color,c]);\r\n\r\n  const handleMouseDown = (e) => {\r\n    const { offsetX, offsetY } = e.nativeEvent;\r\n\r\n    if (tool === \"pencil\") {\r\n      setElements((prevElements) => [\r\n        ...prevElements,\r\n        {\r\n          offsetX,\r\n          offsetY,\r\n          path: [[offsetX, offsetY]],\r\n          stroke: color,\r\n          element: tool,\r\n        },\r\n      ]);\r\n    } else {\r\n      setElements((prevElements) => [\r\n        ...prevElements,\r\n        { offsetX, offsetY, stroke: color, element: tool },\r\n      ]);\r\n    }\r\n\r\n    setIsDrawing(true);\r\n  };\r\n\r\n  useLayoutEffect(() => {\r\n    const roughCanvas = rough.canvas(canvasRef.current);\r\n    if (elements.length > 0) {\r\n      ctx.current.clearRect(\r\n        0,\r\n        0,\r\n        canvasRef.current.width,\r\n        canvasRef.current.height\r\n      );\r\n    }\r\n    elements.forEach((ele, i) => {\r\n      if (ele.element === \"rect\") {\r\n        roughCanvas.draw(\r\n          generator.rectangle(ele.offsetX, ele.offsetY, ele.width, ele.height, {\r\n            stroke: ele.stroke,\r\n            roughness: 0,\r\n            strokeWidth: 5,\r\n          })\r\n        );\r\n      } else if (ele.element === \"line\") {\r\n        roughCanvas.draw(\r\n          generator.line(ele.offsetX, ele.offsetY, ele.width, ele.height, {\r\n            stroke: ele.stroke,\r\n            roughness: 0,\r\n            strokeWidth: 5,\r\n          })\r\n        );\r\n      } else if (ele.element === \"pencil\") {\r\n        roughCanvas.linearPath(ele.path, {\r\n          stroke: ele.stroke,\r\n          roughness: 0,\r\n          strokeWidth: 5,\r\n        });\r\n      }\r\n    });\r\n    const canvasImage = canvasRef.current.toDataURL();\r\n    socket.emit(\"drawing\", canvasImage);\r\n  }, [elements,canvasRef, ctx, socket]);\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (!isDrawing) {\r\n      return;\r\n    }\r\n    const { offsetX, offsetY } = e.nativeEvent;\r\n\r\n    if (tool === \"rect\") {\r\n      setElements((prevElements) =>\r\n        prevElements.map((ele, index) =>\r\n          index === elements.length - 1\r\n            ? {\r\n                offsetX: ele.offsetX,\r\n                offsetY: ele.offsetY,\r\n                width: offsetX - ele.offsetX,\r\n                height: offsetY - ele.offsetY,\r\n                stroke: ele.stroke,\r\n                element: ele.element,\r\n              }\r\n            : ele\r\n        )\r\n      );\r\n    } else if (tool === \"line\") {\r\n      setElements((prevElements) =>\r\n        prevElements.map((ele, index) =>\r\n          index === elements.length - 1\r\n            ? {\r\n                offsetX: ele.offsetX,\r\n                offsetY: ele.offsetY,\r\n                width: offsetX,\r\n                height: offsetY,\r\n                stroke: ele.stroke,\r\n                element: ele.element,\r\n              }\r\n            : ele\r\n        )\r\n      );\r\n    } else if (tool === \"pencil\") {\r\n      setElements((prevElements) =>\r\n        prevElements.map((ele, index) =>\r\n          index === elements.length - 1\r\n            ? {\r\n                offsetX: ele.offsetX,\r\n                offsetY: ele.offsetY,\r\n                path: [...ele.path, [offsetX, offsetY]],\r\n                stroke: ele.stroke,\r\n                element: ele.element,\r\n              }\r\n            : ele\r\n        )\r\n      );\r\n    }\r\n  };\r\n  const handleMouseUp = () => {\r\n    setIsDrawing(false);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"col-md-8 overflow-hidden border border-dark px-0 mx-auto mt-3\"\r\n      style={{ height: \"500px\" }}\r\n      onMouseDown={handleMouseDown}\r\n      onMouseMove={handleMouseMove}\r\n      onMouseUp={handleMouseUp}\r\n    >\r\n      <canvas ref={canvasRef} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Canvas;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}